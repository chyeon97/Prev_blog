---
layout: single
title: "Hook(2)- Context API"
categories: React
tag: [React, Hook, Context API, useContext]
toc: true
toc_sticky: true
---

### ğŸŒï¸â€â™‚ï¸ ì´ ê¸€ì—ì„œ ì•Œ ìˆ˜ ìˆëŠ” ë‚´ìš©

- Context APIë€?
- ì–¸ì œ Context APIì˜ ì‚¬ìš©í•´ì•¼ í• ê¹Œ?
- Context APIë¥¼ ì‚¬ìš©í•˜ëŠ” ì´ìœ 
- ì‚¬ìš© ë°©ë²•

---

### ğŸ¤” Context APIë€?

> ì»´í¬ë„ŒíŠ¸ì˜ ì¤‘ì²© êµ¬ì¡°ê°€ ë³µì¡í•œ ìƒí™©ì—ì„œë„ ë¹„êµì  ì‰½ê²Œ ë°ì´í„°ë¥¼ ì „ë‹¬í•  ìˆ˜ ìˆë„ë¡ í•˜ëŠ” ê²ƒ
>
> > ì¦‰, ì»´í¬ë„ŒíŠ¸ë§ˆë‹¤ ì¼ì¼ì´ propsë¥¼ ë„˜ê²¨ì£¼ì§€ ì•Šê³ ë„ ì»´í¬ë„ŒíŠ¸ íŠ¸ë¦¬ ì „ì²´ì— ë°ì´í„°ë¥¼ ì œê³µí•  ìˆ˜ ìˆë‹¤.

---

### ğŸ§© ì–¸ì œ ì‚¬ìš©í• ê¹Œ?

> ì „ì—­ìœ¼ë¡œ ì‚¬ìš©í•´ì•¼ í•˜ëŠ” ê°’  
> ex) ë¡œê·¸ì¸í•œ ìœ ì €,ë‹¤í¬ ëª¨ë“œ ìœ ë¬´ ê°’, ì„ í˜¸í•˜ëŠ” ì–¸ì–´ ë“±

---

### ğŸ¤·ğŸ»â€â™‚ï¸ Context APIë¥¼ ì‚¬ìš©í•˜ëŠ” ì´ìœ ?

1. ìƒìœ„ ì»´í¬ë„ŒíŠ¸ì—ì„œ í•˜ìœ„ ì»´í¬ë„ŒíŠ¸ë¡œ ì§ì ‘ ë°ì´í„°ë¥¼ ì „ë‹¬í•  ìˆ˜ ìˆë‹¤.
2. ìƒìœ„ì™€ í•˜ìœ„ ì»´í¬ë„ŒíŠ¸ ì‚¬ì´ì— ì¡´ì¬í•˜ëŠ” ì»´í¬ë„ŒíŠ¸ì˜ ë Œë”ë§ ì—¬ë¶€ì™€ ìƒê´€ì—†ì´ í•˜ìœ„ ì»´í¬ë„ŒíŠ¸ì˜ ë Œë”ë§ì´ ë³´ì¥ëœë‹¤.
3. í•˜ìœ„ ì»´í¬ë„ŒíŠ¸ì—ì„œ ìƒìœ„ ì»´í¬ë„ŒíŠ¸ì— ìˆëŠ” stateë¥¼ ë³€ê²½í•  ìˆ˜ ìˆë‹¤.

---

### ğŸ“ ì‚¬ìš© ë°©ë²•

#### Context API âŒ

```javascript
// ì»´í¬ë„ŒíŠ¸ êµ¬ì¡°
//(ìƒìœ„)                                    (í•˜ìœ„)
Provider ì»´í¬ë„ŒíŠ¸ > Middle ì»´í¬ë„ŒíŠ¸ > Consumer ì»´í¬ë„ŒíŠ¸
```

```javascript
// Provider.js
import React, { useState } from "react";

export const Provider = () => {
  const [user, setUser] = useState("mike");
  const changeName = () => {
    user === "mike" ? setUser("Jhon") : setUser("mike");
  };
  return (
    <>
      <Middle name={user} />
      <button onClick={changeName}>ë³€ê²½</button>
    </>
  );
};
```

```javascript
// Middle.js

export const Middle = ({ name }) => {
  return (
    <>
      <Consumer name={name} />
    </>
  );
};
```

```javascript
// Consumer.js

export const Consumer = ({ name }) => {
  return <h1>{name}</h1>;
};
```

`ğŸ–¥ í™”ë©´`  
![image](https://user-images.githubusercontent.com/40657327/161526577-5ad3ede1-7449-4176-bc9b-ce75b4ec0890.png)

`ğŸ¤¹ ì½”ë“œ ì„¤ëª…`

`> Provider ì»´í¬ë„ŒíŠ¸`

- Middle ì»´í¬ë„ŒíŠ¸ì— ìƒíƒœê°’ userë¥¼ ì „ë‹¬
- ë²„íŠ¼ í´ë¦­ ì‹œ mike <-> Jhon ë³€ê²½

`> Middle ì»´í¬ë„ŒíŠ¸`

- Consumer ì»´í¬ë„ŒíŠ¸ì— props ì „ë‹¬

`> Consumer ì»´í¬ë„ŒíŠ¸`

- ì „ë‹¬ ë°›ì€ props ì¶œë ¥

---

#### Context API â­•ï¸

`Provider`

> 1.  React.createReact()ë¥¼ ì´ìš©í•´ ì‚¬ìš©í•  context ë³€ìˆ˜ë¥¼ ìƒì„±í•œë‹¤.
> 2.  context.Providerë¥¼ ë£¨íŠ¸ íƒœê·¸ë¡œ ê°ì‹¼ë‹¤.

<details>
  <summary>
    ì½”ë“œ ë³´ê¸°
  </summary>

  <div markdown="1">

```javascript
// ë³€ê²½ ëœ Provider.js
import React, { useState } from "react";

export const UserContext = React.createContext("");
export const Provider = () => {
  const [user, setUser] = useState("mike");
  const changeName = () => {
    user === "mike" ? setUser("Jhon") : setUser("mike");
  };

  return (
    <UserContext.Provider>
      <Middle name={user} />
      <button onClick={changeName}>ë³€ê²½</button>
    </UserContext.Provider>
  );
};
```

  </div>

</details>

<br/>

`Middle`

> 1. props ì „ë‹¬ì´ í•„ìš”ì—†ìœ¼ë¯€ë¡œ propsë¥¼ ì‚­ì œí•œë‹¤.
> 2. useMemo()ë¥¼ ì´ìš©í•˜ì—¬ ìƒìœ„ ì»´í¬ë„ŒíŠ¸ì˜ state ë³€ê²½ ì‹œì— ë Œë”ë§ ë˜ëŠ” ê²ƒì„ ë§‰ì„ ìˆ˜ ìˆë‹¤. âœ ë Œë”ë§ ì„±ëŠ¥ ìµœì í™”â—ï¸

  <details>
    <summary>
      1. ì½”ë“œ
    </summary>

    <div markdown="1">

```javascript
// ë³€ê²½ ëœ Middle.js
export const Middle = () => {
  return (
    <>
      <Consumer />
    </>
  );
};
```

  </div>

</details>

<details>
    <summary>
     2. ì½”ë“œ 
    </summary>

  <div markdown="1">

```javascript
// useMemo í›…ì„ ì´ìš©í•œ Middle.js
export const Middle = React.memo(() => {
  return <Consumer />;
});
```

  </div>

</details>

<br/>

`Consumer`

> 1. ê°€ì ¸ì˜¬ contextë¥¼ importí•œë‹¤.
> 2. context.Consumerë¥¼ ë£¨íŠ¸ íƒœê·¸ë¡œ ê°ì‹¼ë‹¤.

<details>
  <summary>
    ì½”ë“œ 
  </summary>

  <div markdown="1">

```javascript
import { UserContext } from "./Provider";

export const Consumer = () => {
  return (
    <UserContext.Consumer>{(value) => <h1>{value}</h1>}</UserContext.Consumer>
  );
};
```

  </div>

</details>

<details>
  <summary>
    ğŸ™‹â€â™€ï¸ Context.Consumer ?  
  </summary>

  <div markdown="1">
```
  - contextì˜ í˜„ì¬ê°’ì„ ë°›ê³  React ë…¸ë“œë¥¼ ë°˜í™˜í•œë‹¤.
  - ë§¤ê°œë³€ìˆ˜ ê°’ì€ í•´ë‹¹ contextì˜ Provider ì¤‘ ê°€ì¥ ê°€ê¹Œìš´ ìƒìœ„ íŠ¸ë¦¬ì˜ ê°’ì´ë‹¤.
  - ìƒìœ„ Providerê°€ ì—†ë‹¤ë©´, ë§¤ê°œë³€ìˆ˜ ê°’ì€ createContext()ì—ì„œ ë³´ëƒˆë–¤ defaultValueì˜ ê°’ì„ ê°€ì ¸ì˜¨ë‹¤.
```
  </div>
</details>

<br/>

---

#### í•˜ìœ„ ì»´í¬ë„ŒíŠ¸ì—ì„œ setState ì‚¬ìš© ğŸ‘¨ğŸ»â€ğŸ«

`Provider`

> - ìƒíƒœê°’ ë³€ê²½ í•¨ìˆ˜(:setUser)ë¥¼ ë‚´ë³´ë‚´ëŠ” context ìƒì„±
> - ìƒì„±í•œ context.Providerë¥¼ ì´ìš©í•´ ë£¨íŠ¸ íƒœê·¸ë¡œ ê°ì‹¸ê¸°
> - ìƒíƒœê°’ ë³€ê²½í•˜ëŠ” ì½”ë“œ ì‚­ì œ

<details>
  <summary>
    ì½”ë“œ ë³´ê¸°
  </summary>

  <div markdown="1">

```javascript
// ë³€ê²½ ëœ Provider.js

export const SetUserContext = React.createContext(() => {});
export const UserContext = React.createContext("");

export const Provider = () => {
  const [user, setUser] = useState("mike");

  return (
    <SetUserContext.Provider>
      <UserContext.Provider>
        <Middle name={user} />
      </UserContext.Provider>
    </SetUserContext.Provider>
  );
};
```

  </div>

</details>

<br/>

`Consumer`

> - SetUserContextë¥¼ importí•œë‹¤.
> - SetUserContextë¥¼.Consumerë¥¼ ë£¨íŠ¸ íƒœê·¸ë¡œ ê°ì‹¼ë‹¤.
> - stateë¥¼ ë³€ê²½í•  í•¨ìˆ˜ë¥¼ ì¶”ê°€í•œë‹¤

<details>
  <summary>
    ì½”ë“œ 
  </summary>

  <div markdown="1">

```javascript
import { UserContext, SetUserContext } from "./Provider";

export const Consumer = () => {
  return (
    <SetUserContext.Consumer>
      {(setUser) => (
        <UserContext.Consumer>
          {(value) => (
            <>
              <h1>{value}</h1>
              <button
                onClick={() => {
                  value === "mike" ? setUser("Jhon") : setUser("mike");
                }}
              >
                ë³€ê²½
              </button>
            </>
          )}
        </UserContext.Consumer>
      )}
    </SetUserContext.Consumer>
  );
};
```

  </div>

</details>

---

#### useContext í›… ì‚¬ìš© ğŸ’¡

> userContext í›…ì„ ì´ìš©í•˜ë©´ context.Consumer ì»´í¬ë„ŒíŠ¸ ì—†ì´ ë¶€ëª¨ ì»´í¬ë„ŒíŠ¸ì—ì„œ ì „ë‹¬ëœ context ë°ì´í„°ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

```javascript
export const Consumer = () => {
  const user = React.useContext(UserContext); // useContext í›… ì‚¬ìš©
  const setUser = React.useContext(SetUserContext); // useContext í›… ì‚¬ìš©

  return (
    <>
      {setUser && (
        <>
          {user && (
            <>
              <h1>{`${user}`}</h1>
              <button
                onClick={() => {
                  user === "mike" ? setUser("Jhon") : setUser("mike");
                }}
              >
                ë³€ê²½
              </button>
            </>
          )}
        </>
      )}
    </>
  );
};
```
